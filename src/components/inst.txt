import { useState, useRef } from "react";
import axios from 'axios';

import RedNote from '../Images/SVG/Artboard 2.svg'
import YellowNote from '../Images/SVG/Artboard 3.svg'
import GreenNote from '../Images/SVG/Artboard 4.svg'

import Wave1 from '../Images/SVG/Donate-LeftWave.svg'
import Wave2 from '../Images/SVG/wave-right.svg'
import Wave3 from '../Images/SVG/WaveLine.svg'

import InstagramLogo from "../Images/SVG/Frame 42.svg"
import LinkedinLogo from "../Images/SVG/Frame 43.svg"
import YoutubeLogo from "../Images/SVG/Frame 44.svg"


export default function DonateInst() { 
    const [fname, setFname] = useState('');
    const [femail, setFemail] = useState('');
    const [fphone, setFphone] = useState('');
    const [fmessage, setFmessage] = useState('');
    const [file, setFile] = useState(null);
    const fileInputRef = useRef(null);

    const handleSubmit = async (e) => {
        e.preventDefault();
      
        const formData = new FormData();
        formData.append("name", fname);
        formData.append("email", femail);
        formData.append("phone", fphone);
        formData.append("message", fmessage);
        if (file) {
          formData.append("attachment", file);
        }
      
        try {
          const res = await axios.post("http://localhost:5000/api/donation", formData, {
            headers: { "Content-Type": "multipart/form-data" },
          });
          alert("Success: " + res.data.message);
        } catch (err) {
          alert("Failed: " + (err.response?.data?.error || "Unknown error"));
        }
      };

    return (
        <div style={{backgroundColor: '#FFFDF4'}}>
                <div>
                <div className="Donate-Instrument-Section">
                    <div className="graphicelements">
                        <div className="Donate-Wave-Left">
                            <img src={Wave1} alt="" />
                        </div>
                        <div className="Donate-Wave-Right">
                            <img src={Wave2} alt="" />
                        </div>
                        <div className="Donate-Wave-Right-Page">
                            <img src={Wave3} alt="" />
                        </div>
                        <div className="green-note" id="green12">
                            <img src={GreenNote} alt="" />
                        </div>
                        <div className="yellow-note" id="yellow5">
                            <img src={YellowNote} alt="" />
                        </div>
                        <div className="yellow-note" id="yellow5">
                            <img src={YellowNote} alt="" />
                        </div>
                        <div className="red-note" id="red8">
                            <img src={RedNote} alt="" />
                        </div>
                    </div>
                        <div className="Donate-Instrument-Section-Info">
                            <h2>Give Your Old Instrument a New Voice</h2>
                            <h3>
                                Donate an instrument â€” and give a child the gift of music.
                            </h3>
                            <p>
                                Got a keyboard gathering dust? A violin no one uses? Donate it and watch as instruments find new life through music and creativity. Let us spark creativity, joy, and confidence in children who need it most.
                            </p>
                            <div className="Donate-Instrument-Section-Info-Connections">
                                <a href="tel:+918591952169" className="Donate-Instrument-Links-a">
                                    +91 8591952169
                                </a>
                                <a href="tel:+917400030602" className="Donate-Instrument-Links-a">
                                    +91 7400030602
                                </a>
                                <a href="mailto:sursaathi.music@gmail.com" className="Donate-Instrument-Links-a">
                                sursaathi.music@gmail.com
                                </a>
                                <a href="https://maps.google.com/?q=Mumbai,+India" target="_blank" rel="noopener noreferrer" className="Donate-Instrument-Links-a">
                                    Mumbai, IN
                                </a>
                            </div>
                            <div className="Donate-Instrument-Socials">
                                <a href="#" className="Donate-Instrument-Socials-a"><img src={InstagramLogo} alt="" /></a>
                                <a href="#" className="Donate-Instrument-Socials-a"><img src={LinkedinLogo} alt="" /></a>
                                <a href="#" className="Donate-Instrument-Socials-a"><img src={YoutubeLogo} alt="" /></a>
                            </div>
                        </div>
                        <div>
                        <form onSubmit={handleSubmit} className="donateform">
                            <div className="form-input">
                                <label>Your Name</label>
                                <input type="text" name="name" placeholder="Name" value={fname} onChange={(e) => setFname(e.target.value)} required/>
                            </div>
                            <div className="form-input">
                                <label>Your Email</label>
                                <input type="email" name="email" placeholder="Email" value={femail} onChange={(e) => setFemail(e.target.value)}   required/>
                            </div>
                            <div className="form-input">
                                <label>Your Phone No.</label>
                                <input type="tel" name="phone" placeholder="Phone No" value={fphone} onChange={(e) => setFphone(e.target.value)} required/>
                            </div>
                            <div className="form-input">
                                <label>Your Message</label>
                                <input type="textarea" name="Message" placeholder="Message" value={fmessage} rows={4} onChange={(e) => setFmessage(e.target.value)} required/>
                            </div>
                            <div className="form-input" id="uploadfiles">
                                <label>Upload Images
                                <input type="file" name="attachment" multiple onChange={(e) => setFile(e.target.files[0])} />
                                </label>
                            </div>
                            <div className="filesattached">{file ? file.name : 'No file chosen'}</div>
                            <button type="submit">Submit</button>
                        </form>
                    </div>
                </div>
                </div>
                <div className="How-Donate-Section">
                    <h2>How to Donate:</h2>
                    <div className="How-Donate-Section-Info">
                        <h3>1. Fill out the Instrument Donation Form</h3>
                        <p>
                            Let us know what you're looking to donate and share its history! [Form above]
                        </p>
                    </div>
                    <div className="How-Donate-Section-Info">
                        <h3>2. We'll Coordinate Pickup or Drop-off</h3>
                        <p>
                            Our team will reach out with collection details (Mumbai only for now).
                        </p>
                    </div>
                    <div className="How-Donate-Section-Info">
                        <h3>3. Your Instrument Finds a New Home</h3>
                        <p>
                            We share it with a child or workshop where it's needed most.
                        </p>
                    </div>
                </div>
        </div>
    );
}
  